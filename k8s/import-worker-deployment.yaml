apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: franklin-status-import-worker-cronjob
spec:
  schedule: "0 0 * * *"
  jobTemplate:
    spec:
      template:
        spec:
          imagePullSecrets:
            - name: regcred
          containers:
            - name: franklin-site-status-import-worker
              image: docker-experience-success-release.dr-uw2.adobeitc.com/franklin-site-status-import-worker:latest
              env:
                - name: MONGODB_URI
                  valueFrom:
                    secretKeyRef:
                      name: franklin-site-status-secrets
                      key: mongodb-uri
                - name: GITHUB_CLIENT_ID
                  valueFrom:
                    secretKeyRef:
                      name: franklin-site-status-secrets
                      key: github-client-id
                - name: GITHUB_CLIENT_SECRET
                  valueFrom:
                    secretKeyRef:
                      name: franklin-site-status-secrets
                      key: github-client-secret
                - name: GITHUB_ORG
                  valueFrom:
                    secretKeyRef:
                      name: franklin-site-status-secrets
                      key: github-org
          restartPolicy: OnFailure
